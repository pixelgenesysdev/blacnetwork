(()=>{var e={71:e=>{e.exports=function(){return this.wc.wcSettings}()}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var c=t[a]={exports:{}};return e[a](c,c.exports,n),c.exports}var a={};for(var r in(()=>{"use strict";function e(){return e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},e.apply(null,arguments)}const t=window.wp.element,a=window.wp.htmlEntities;var r=n(71);const c="yith_paypal_payments_custom_card",o=({isLoaded:e,components:{LoadingMask:n}})=>{const{cardNumberLabel:a,expirationDateLabel:r,cvvLabel:o}=yith_ppwc_card_settings;return(0,t.createElement)(n,{isLoading:!e,showSpinner:!0},(0,t.createElement)("div",{className:`wc-block-card-elements payment_method_${c}`},(0,t.createElement)("div",{className:"wc-block-gateway-container wc-card-number-element"},(0,t.createElement)("div",{id:"yith-ppwc-cc-card-number-block",className:"wc-block-yith-ppwc-field empty hosted-field"}),(0,t.createElement)("label",{className:"hosted-fields--label",htmlFor:"yith-ppwc-cc-card-number-block"},a),(0,t.createElement)("div",{id:"card-image"})),(0,t.createElement)("div",{className:"wc-block-gateway-container wc-expiration-date-element"},(0,t.createElement)("div",{id:"yith-ppwc-cc-expiration-date-block",className:"wc-block-yith-ppwc-field empty hosted-field"}),(0,t.createElement)("label",{className:"hosted-fields--label",htmlFor:"yith-ppwc-cc-expiration-date-block"},r)),(0,t.createElement)("div",{className:"wc-block-gateway-container wc-expiration-date-element"},(0,t.createElement)("div",{id:"yith-ppwc-cc-cvv-block",className:"wc-block-yith-ppwc-field empty hosted-field"}),(0,t.createElement)("label",{className:"hosted-fields--label",htmlFor:"yith-ppwc-cc-cvv-block"},o)),(0,t.createElement)("input",{type:"hidden",value:"",id:"yith_paypal_cc_payments-order-id"})))};function i(e,t){var n=[];return e.push({name:"security",value:t},{name:"flow",value:"checkout"}),jQuery.each(e,(function(e,t){n.push(t.name+"="+t.value)})),n.join("&")}const l=n=>{const[a,r]=(0,t.useState)(!1),[c,l]=(0,t.useState)(!1),{components:{LoadingMask:s},description:d,activePaymentMethod:p,emitResponse:u,eventRegistration:m}=n,{onPaymentSetup:h}=m,{threedsecure:y}=yith_ppwc_card_settings,w=(({billing:e,shippingData:n,eventRegistration:a})=>{const{ajaxUrl:r,liabilityList:c,threedsecure:o,ajaxNonce:l}=yith_ppwc_card_settings,[s,d]=(0,t.useState)(""),{onSubmit:p}=a;return{cardFieldsInstance:s,loadSDK:(0,t.useCallback)((()=>{const e=paypal.CardFields({style:{input:{"font-size":"15px","font-weight":"lighter",color:"#ccc",padding:"2.5em 1em 1em"},":focus":{color:"black"},".valid":{color:"black"},".invalid":{color:"black"}},createOrder:(e,t)=>fetch(r,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:i([{name:"request",value:"create_order"},{name:"checkoutRequest",value:"checkout"},{name:"orderID",value:""}],l)}).then((function(e){return e.json()})).then((function(e){if(e.error)throw console.log("undefined",e.error),e.error;return document.querySelector("#yith_paypal_cc_payments-order-id").value=e.id,e.id})),onApprove:(e,t)=>{if(e&&e.orderID){if(o){let{liabilityShift:t}=e;if(void 0!==t&&(t=t.toLowerCase(),-1===c.indexOf(t))){if("unknown"===t)throw yith_ppwc_frontend.secure_3d_unknown;if("no"===t)throw yith_ppwc_frontend.secure_3d_no}}fetch(r,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:i([{name:"request",value:"approve_order"},{name:"orderID",value:e.orderID},{name:"checkoutRequest",value:"checkout"}])}).then((function(e){return e.json()})).then((function(e){e&&(e.redirect?window.location.href=e.redirect:e.result&&"failure"===e.result&&window.location.reload()),void 0!==p&&p()})).catch((e=>{throw e}))}}});return e.isEligible()&&(e.NumberField().render("#yith-ppwc-cc-card-number-block"),e.CVVField().render("#yith-ppwc-cc-cvv-block"),e.ExpiryField().render("#yith-ppwc-cc-expiration-date-block")),d(e),{cardFields:e}}),[])}})(n),{loadSDK:f}=w;return(0,t.useEffect)((()=>{let e;return function(){try{const{cardFields:t,orderID:n}=f();e=t,l(e),r(!0)}catch(e){console.log(e)}}(),()=>{r(!1),l(!1),e&&void 0!==e.onChange&&e?.teardown()}}),[f]),(0,t.useEffect)((()=>{if("yith_paypal_payments_custom_card"===p)return h((async()=>{if(!c)return{type:u.responseTypes.ERROR,messageContext:u.noticeContexts.PAYMENTS,message:yith_ppwc_frontend.errorMessage};try{const e={};let t=!1;return await c.submit().then((()=>{const t=document.querySelector("#yith_paypal_cc_payments-order-id");e["yith_paypal_cc_payments-order-id"]=jQuery(t).val()})).catch((e=>{t=e})),t?{type:u.responseTypes.ERROR,messageContext:u.noticeContexts.PAYMENTS,message:t.message}:{type:u.responseTypes.SUCCESS,meta:{paymentMethodData:e}}}catch(e){return{type:u.responseTypes.ERROR,messageContext:u.noticeContexts.PAYMENTS,message:e}}}))}),[h,c,u.responseTypes.SUCCESS,u.responseTypes.ERROR,u.noticeContexts.PAYMENTS]),(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",null,d),(0,t.createElement)(s,{isLoading:!a,showSpinner:!0},(0,t.createElement)(o,e({},n,{isLoaded:r}))))};var s;const{registerPaymentMethod:d}=wc.wcBlocksRegistry,p=(0,r.getPaymentMethodData)(c,{}),u=(0,a.decodeEntities)(p.title),m=(0,a.decodeEntities)(p.description),h=n=>{const{isEditing:a}=n;return a?null:(0,t.createElement)(l,e({description:m},n))};d({name:c,label:(0,t.createElement)((e=>{const{PaymentMethodLabel:n}=e.components;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n,{text:u}),(0,t.createElement)("span",{style:{marginLeft:"5px"}}))}),null),content:(0,t.createElement)(h,null),edit:(0,t.createElement)(h,null),canMakePayment:()=>!0,ariaLabel:u,supports:{features:null!==(s=p?.supports)&&void 0!==s?s:[]}})})(),a)this[r]=a[r];a.__esModule&&Object.defineProperty(this,"__esModule",{value:!0})})();